<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>🎮闖關任務</title>

<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

<style>
:root {
  --font-base: 18px;  /* 一般說明文字大小，可自行調整。例：主卡內的任務說明「歡迎參加幹掉雙面陳闖關活動～」即使用此大小 */
  --font-lg: 24px;    /* 闖關活動標題文字大小，可自行調整。例：「第1關」、「第2關」這些標題字即使用此大小 */
  --font-xl: 24px;    /* 首頁主標題文字大小，可自行調整。例：首頁「🕙闖關任務🕒」這行主標題即使用此大小 */
  --muted: #6b7280;   /* 排行榜副文字顏色，可自行調整。例：卡片內灰色的提示文字或副標題皆用此色 */
  --ink: #111827;     /* 主文字顏色，可自行調整。例：排行榜姓名、分數、地圖提示框主字體即使用此顏色 */
}
}

body {
  margin: 0;
  font-family: var(--font-family-main);
  background: linear-gradient(0deg, #ebb3a9 0%, #f5a28c 45%, #ff906e 100%); /* 主背景粉橘漸層，可調整三色 */
  color: var(--ink);
  overflow: hidden;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.15); /* 文字陰影，可自行調整濃淡 */
}

#app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

#main-area {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 55vh; /* 上方主區域佔高比例，可調整 */
}

.main-card {
  background: linear-gradient(0deg, rgba(247, 237, 143, 1) 0%, rgba(241, 223, 57, 1) 71%, rgba(237, 214, 5, 1) 100%); /* 主卡黃金漸層，可調整色值 */
  border-radius: 24px; /* 卡片圓角，可調整 */
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2); /* 卡片陰影，可調整模糊度與深淺 */
  text-align: center;
  width: 90vw; /* 卡片寬度，可調整 */
  max-width: 880px; /* 卡片最大寬度，可調整 */
  padding: 30px 20px; /* 內距，可調整 */
  backdrop-filter: blur(6px); /* 模糊效果，可調整強度 */
  transition: all 0.6s ease; /* 動畫速度，可調整 */
}
.main-card h1 { font-size: var(--font-xl); margin: 10px 0; } /* 首頁大標題，可調整大小 */
.main-card p { font-size: var(--font-base); color: var(--muted); } /* 副文字樣式，可調整字色與大小 */

button {
  background-color: #ffb703;  /* 主按鈕背景色，可自行調整 */
  border: none; 
  border-radius: 10px;   /* 按鈕圓角，可自行調整 */
  color: #111;    /* 按鈕文字顏色，可自行調整 */
  font-size: var(--font-base);
  padding: 10px 25px;    /* 按鈕內距（上下／左右），可自行調整 */
  cursor: pointer; 
  margin-top: 15px;    /* 按鈕與上方距離，可自行調整 */
  box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* 按鈕陰影，可調整深淺 */
}
button:hover { background-color: #ffd166; } /* 滑過按鈕時顏色，可調整 */

#bottom-area {
  display: flex;
  height: 45%; /* 下方地圖+排行榜區高度比例，可調整 */
  border-top: 4px solid #fff; /* 上邊線，可調整粗細與顏色 */
}

/* ================== 🏆 排行榜 ================== */
#leaderboard {
  flex: 1;
  background: linear-gradient(180deg, #a9a9eb 0%, #9ee0ff 77%, #00d4ff 100%); /* 排行榜藍色漸層背景，可調整 */
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 60px; /* 下方預留空間，可調整 */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative;
}
#leaderboard h2 {
  font-size: 26px; /* 排行榜標題文字大小，可調整 */
  margin: 8px 0 12px; /* 標題上下距離，可調整 */
  color: #111; /* 標題顏色，可調整 */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}
#leaderboard .hint-box {
  position: absolute;
  top: 10px; /* 提示框距上方距離，可調整 */
  right: 10px; /* 提示框距右邊距離，可調整 */
  background: rgba(220,220,220,0.92); /* 提示框背景顏色，可調整 */
  border-radius: 8px; /* 提示框圓角，可調整 */
  padding: 4px 10px; /* 提示框內距，可調整 */
  font-size: 14px; /* 提示文字大小，可調整 */
  box-shadow: 0 2px 6px rgba(0,0,0,0.1); /* 陰影可調整 */
  white-space: nowrap;
  z-index: 9999;
}

table {
  width: 95%; /* 表格寬度，可調整 */
  border-collapse: collapse;
  font-size: 18px; /* 表格文字大小，可調整 */
  color: #111;
}
th, td {
  text-align: center;
  padding: 6px 0; /* 儲存格內距，可調整 */
}
th { background-color: rgba(255, 255, 255, 0.4); } /* 標頭背景色，可調整 */
tr:nth-child(even) { background-color: rgba(255, 255, 255, 0.2); } /* 偶數列底色，可調整 */
.ellipsis td {
  text-align: center;
  color: #555; /* 省略列文字顏色，可調整 */
  font-style: italic;
}
@keyframes scoreFlash {
  0% { background-color: rgba(255,255,150,0.7); } /* 分數閃爍起始色，可調整 */
  100% { background-color: transparent; }
}
.flash { animation: scoreFlash 1s ease; } /* 閃爍動畫時間可調整 */

/* ================== 🗺️ 地圖 ================== */
#map {
  flex: 1;
  height: 100%;
  border-left: 4px solid #fff; /* 左邊框，可調整顏色與粗細 */
  position: relative;
  overflow: hidden;
}
#map .map-hint-box {
  position: absolute;
  top: 8px; /* 地圖提示距上距離，可調整 */
  left: 10px; /* 地圖提示距左距離，可調整 */
  background: rgba(220,220,220,0.92); /* 提示背景色，可調整 */
  border-radius: 8px; /* 提示圓角，可調整 */
  padding: 4px 10px; /* 內距，可調整 */
  font-size: 14px; /* 字體大小，可調整 */
  box-shadow: 0 2px 6px rgba(0,0,0,0.1); /* 陰影可調整 */
  white-space: nowrap;
  z-index: 9999;
}
.leaflet-container {
  width: 100%;
  height: 100%;
  background: #f5f5f5; /* 地圖預設背景，可調整 */
  z-index: 1;
}
.leaflet-control-attribution {
  background: rgba(180, 180, 180, 0.9); /* 地圖浮水印底色，可調整 */
  border-radius: 6px; /* 圓角可調整 */
  padding: 2px 8px; /* 內距可調整 */
  font-size: 13px; /* 字體大小可調整 */
  z-index: 9999;
}

#notif {
  position: fixed;
  top: 8%; /* 提示框距上方位置，可調整 */
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.95); /* 提示底色，可調整 */
  border-radius: 12px; /* 提示圓角，可調整 */
  padding: 12px 25px; /* 提示內距，可調整 */
  box-shadow: 0 4px 14px rgba(0,0,0,0.2); /* 提示陰影可調整 */
  font-size: 20px; /* 提示文字大小，可調整 */
  color: #111; /* 文字顏色可調整 */
  opacity: 0;
  transition: all 0.4s ease; /* 顯示速度可調整 */
  pointer-events: none;
  white-space: nowrap;
}
#notif.show {
  opacity: 1;
  transform: translate(-50%, -10px);
}
#notif:not(.show) {
  transform: translate(-50%, 30px);
  opacity: 0;
}

/* 手機版調整區 */
@media (max-width: 768px) {
  #bottom-area {
    flex-direction: row;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    touch-action: pan-x;
  }
  #leaderboard, #map {
    flex: none;
    width: 100vw; /* 手機寬度佔滿，可調整 */
    height: 100%;
    scroll-snap-align: start;
  }
}
</style>
</head>
<body>
<div id="app">
  <div id="main-area">
    <div class="main-card" id="mission-card">
      <h1>🕙闖關任務🕒</h1>
      <p>歡迎參加幹掉雙面陳闖關活動～<br>請點擊開始進行挑戰！</p>
      <button onclick="nextMission()">開始任務 ▶</button>
    </div>
  </div>

  <div id="bottom-area">
    <div id="leaderboard">
      <h2>🏆 排行榜</h2>
      <span class="hint-box">👉 往左滑為地圖</span>
      <table>
        <thead><tr><th>名次</th><th>暱稱</th><th>分數</th></tr></thead>
        <tbody id="rank-body"></tbody>
      </table>
    </div>
    <div id="map">
      <div class="map-hint-box">👈 往右滑為排行榜</div>
    </div>
  </div>
</div>

<div id="notif"></div>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- JS 保留原樣功能，CSS 可依註解微調 -->
<script>
/* JS 部分保持原樣，如需我幫註解JS內可調數字也可繼續做 */
</script>
</body>
</html>
