<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸ®é—–é—œä»»å‹™</title>

<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

<style>
:root {
  --font-base: 18px;  /* ä¸€èˆ¬èªªæ˜æ–‡å­—å¤§å°ï¼Œå¯è‡ªè¡Œèª¿æ•´ã€‚ä¾‹ï¼šä¸»å¡å…§çš„ä»»å‹™èªªæ˜ã€Œæ­¡è¿åƒåŠ å¹¹æ‰é›™é¢é™³é—–é—œæ´»å‹•ï½ã€å³ä½¿ç”¨æ­¤å¤§å° */
  --font-lg: 24px;    /* é—–é—œæ´»å‹•æ¨™é¡Œæ–‡å­—å¤§å°ï¼Œå¯è‡ªè¡Œèª¿æ•´ã€‚ä¾‹ï¼šã€Œç¬¬1é—œã€ã€ã€Œç¬¬2é—œã€é€™äº›æ¨™é¡Œå­—å³ä½¿ç”¨æ­¤å¤§å° */
  --font-xl: 24px;    /* é¦–é ä¸»æ¨™é¡Œæ–‡å­—å¤§å°ï¼Œå¯è‡ªè¡Œèª¿æ•´ã€‚ä¾‹ï¼šé¦–é ã€ŒğŸ•™é—–é—œä»»å‹™ğŸ•’ã€é€™è¡Œä¸»æ¨™é¡Œå³ä½¿ç”¨æ­¤å¤§å° */
  --muted: #6b7280;   /* æ’è¡Œæ¦œå‰¯æ–‡å­—é¡è‰²ï¼Œå¯è‡ªè¡Œèª¿æ•´ã€‚ä¾‹ï¼šå¡ç‰‡å…§ç°è‰²çš„æç¤ºæ–‡å­—æˆ–å‰¯æ¨™é¡Œçš†ç”¨æ­¤è‰² */
  --ink: #111827;     /* ä¸»æ–‡å­—é¡è‰²ï¼Œå¯è‡ªè¡Œèª¿æ•´ã€‚ä¾‹ï¼šæ’è¡Œæ¦œå§“åã€åˆ†æ•¸ã€åœ°åœ–æç¤ºæ¡†ä¸»å­—é«”å³ä½¿ç”¨æ­¤é¡è‰² */
}
}

body {
  margin: 0;
  font-family: var(--font-family-main);
  background: linear-gradient(0deg, #ebb3a9 0%, #f5a28c 45%, #ff906e 100%); /* ä¸»èƒŒæ™¯ç²‰æ©˜æ¼¸å±¤ï¼Œå¯èª¿æ•´ä¸‰è‰² */
  color: var(--ink);
  overflow: hidden;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.15); /* æ–‡å­—é™°å½±ï¼Œå¯è‡ªè¡Œèª¿æ•´æ¿ƒæ·¡ */
}

#app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

#main-area {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 55vh; /* ä¸Šæ–¹ä¸»å€åŸŸä½”é«˜æ¯”ä¾‹ï¼Œå¯èª¿æ•´ */
}

.main-card {
  background: linear-gradient(0deg, rgba(247, 237, 143, 1) 0%, rgba(241, 223, 57, 1) 71%, rgba(237, 214, 5, 1) 100%); /* ä¸»å¡é»ƒé‡‘æ¼¸å±¤ï¼Œå¯èª¿æ•´è‰²å€¼ */
  border-radius: 24px; /* å¡ç‰‡åœ“è§’ï¼Œå¯èª¿æ•´ */
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2); /* å¡ç‰‡é™°å½±ï¼Œå¯èª¿æ•´æ¨¡ç³Šåº¦èˆ‡æ·±æ·º */
  text-align: center;
  width: 90vw; /* å¡ç‰‡å¯¬åº¦ï¼Œå¯èª¿æ•´ */
  max-width: 880px; /* å¡ç‰‡æœ€å¤§å¯¬åº¦ï¼Œå¯èª¿æ•´ */
  padding: 30px 20px; /* å…§è·ï¼Œå¯èª¿æ•´ */
  backdrop-filter: blur(6px); /* æ¨¡ç³Šæ•ˆæœï¼Œå¯èª¿æ•´å¼·åº¦ */
  transition: all 0.6s ease; /* å‹•ç•«é€Ÿåº¦ï¼Œå¯èª¿æ•´ */
}
.main-card h1 { font-size: var(--font-xl); margin: 10px 0; } /* é¦–é å¤§æ¨™é¡Œï¼Œå¯èª¿æ•´å¤§å° */
.main-card p { font-size: var(--font-base); color: var(--muted); } /* å‰¯æ–‡å­—æ¨£å¼ï¼Œå¯èª¿æ•´å­—è‰²èˆ‡å¤§å° */

button {
  background-color: #ffb703;  /* ä¸»æŒ‰éˆ•èƒŒæ™¯è‰²ï¼Œå¯è‡ªè¡Œèª¿æ•´ */
  border: none; 
  border-radius: 10px;   /* æŒ‰éˆ•åœ“è§’ï¼Œå¯è‡ªè¡Œèª¿æ•´ */
  color: #111;    /* æŒ‰éˆ•æ–‡å­—é¡è‰²ï¼Œå¯è‡ªè¡Œèª¿æ•´ */
  font-size: var(--font-base);
  padding: 10px 25px;    /* æŒ‰éˆ•å…§è·ï¼ˆä¸Šä¸‹ï¼å·¦å³ï¼‰ï¼Œå¯è‡ªè¡Œèª¿æ•´ */
  cursor: pointer; 
  margin-top: 15px;    /* æŒ‰éˆ•èˆ‡ä¸Šæ–¹è·é›¢ï¼Œå¯è‡ªè¡Œèª¿æ•´ */
  box-shadow: 0 4px 8px rgba(0,0,0,0.2); /* æŒ‰éˆ•é™°å½±ï¼Œå¯èª¿æ•´æ·±æ·º */
}
button:hover { background-color: #ffd166; } /* æ»‘éæŒ‰éˆ•æ™‚é¡è‰²ï¼Œå¯èª¿æ•´ */

#bottom-area {
  display: flex;
  height: 45%; /* ä¸‹æ–¹åœ°åœ–+æ’è¡Œæ¦œå€é«˜åº¦æ¯”ä¾‹ï¼Œå¯èª¿æ•´ */
  border-top: 4px solid #fff; /* ä¸Šé‚Šç·šï¼Œå¯èª¿æ•´ç²—ç´°èˆ‡é¡è‰² */
}

/* ================== ğŸ† æ’è¡Œæ¦œ ================== */
#leaderboard {
  flex: 1;
  background: linear-gradient(180deg, #a9a9eb 0%, #9ee0ff 77%, #00d4ff 100%); /* æ’è¡Œæ¦œè—è‰²æ¼¸å±¤èƒŒæ™¯ï¼Œå¯èª¿æ•´ */
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 60px; /* ä¸‹æ–¹é ç•™ç©ºé–“ï¼Œå¯èª¿æ•´ */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative;
}
#leaderboard h2 {
  font-size: 26px; /* æ’è¡Œæ¦œæ¨™é¡Œæ–‡å­—å¤§å°ï¼Œå¯èª¿æ•´ */
  margin: 8px 0 12px; /* æ¨™é¡Œä¸Šä¸‹è·é›¢ï¼Œå¯èª¿æ•´ */
  color: #111; /* æ¨™é¡Œé¡è‰²ï¼Œå¯èª¿æ•´ */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}
#leaderboard .hint-box {
  position: absolute;
  top: 10px; /* æç¤ºæ¡†è·ä¸Šæ–¹è·é›¢ï¼Œå¯èª¿æ•´ */
  right: 10px; /* æç¤ºæ¡†è·å³é‚Šè·é›¢ï¼Œå¯èª¿æ•´ */
  background: rgba(220,220,220,0.92); /* æç¤ºæ¡†èƒŒæ™¯é¡è‰²ï¼Œå¯èª¿æ•´ */
  border-radius: 8px; /* æç¤ºæ¡†åœ“è§’ï¼Œå¯èª¿æ•´ */
  padding: 4px 10px; /* æç¤ºæ¡†å…§è·ï¼Œå¯èª¿æ•´ */
  font-size: 14px; /* æç¤ºæ–‡å­—å¤§å°ï¼Œå¯èª¿æ•´ */
  box-shadow: 0 2px 6px rgba(0,0,0,0.1); /* é™°å½±å¯èª¿æ•´ */
  white-space: nowrap;
  z-index: 9999;
}

table {
  width: 95%; /* è¡¨æ ¼å¯¬åº¦ï¼Œå¯èª¿æ•´ */
  border-collapse: collapse;
  font-size: 18px; /* è¡¨æ ¼æ–‡å­—å¤§å°ï¼Œå¯èª¿æ•´ */
  color: #111;
}
th, td {
  text-align: center;
  padding: 6px 0; /* å„²å­˜æ ¼å…§è·ï¼Œå¯èª¿æ•´ */
}
th { background-color: rgba(255, 255, 255, 0.4); } /* æ¨™é ­èƒŒæ™¯è‰²ï¼Œå¯èª¿æ•´ */
tr:nth-child(even) { background-color: rgba(255, 255, 255, 0.2); } /* å¶æ•¸åˆ—åº•è‰²ï¼Œå¯èª¿æ•´ */
.ellipsis td {
  text-align: center;
  color: #555; /* çœç•¥åˆ—æ–‡å­—é¡è‰²ï¼Œå¯èª¿æ•´ */
  font-style: italic;
}
@keyframes scoreFlash {
  0% { background-color: rgba(255,255,150,0.7); } /* åˆ†æ•¸é–ƒçˆèµ·å§‹è‰²ï¼Œå¯èª¿æ•´ */
  100% { background-color: transparent; }
}
.flash { animation: scoreFlash 1s ease; } /* é–ƒçˆå‹•ç•«æ™‚é–“å¯èª¿æ•´ */

/* ================== ğŸ—ºï¸ åœ°åœ– ================== */
#map {
  flex: 1;
  height: 100%;
  border-left: 4px solid #fff; /* å·¦é‚Šæ¡†ï¼Œå¯èª¿æ•´é¡è‰²èˆ‡ç²—ç´° */
  position: relative;
  overflow: hidden;
}
#map .map-hint-box {
  position: absolute;
  top: 8px; /* åœ°åœ–æç¤ºè·ä¸Šè·é›¢ï¼Œå¯èª¿æ•´ */
  left: 10px; /* åœ°åœ–æç¤ºè·å·¦è·é›¢ï¼Œå¯èª¿æ•´ */
  background: rgba(220,220,220,0.92); /* æç¤ºèƒŒæ™¯è‰²ï¼Œå¯èª¿æ•´ */
  border-radius: 8px; /* æç¤ºåœ“è§’ï¼Œå¯èª¿æ•´ */
  padding: 4px 10px; /* å…§è·ï¼Œå¯èª¿æ•´ */
  font-size: 14px; /* å­—é«”å¤§å°ï¼Œå¯èª¿æ•´ */
  box-shadow: 0 2px 6px rgba(0,0,0,0.1); /* é™°å½±å¯èª¿æ•´ */
  white-space: nowrap;
  z-index: 9999;
}
.leaflet-container {
  width: 100%;
  height: 100%;
  background: #f5f5f5; /* åœ°åœ–é è¨­èƒŒæ™¯ï¼Œå¯èª¿æ•´ */
  z-index: 1;
}
.leaflet-control-attribution {
  background: rgba(180, 180, 180, 0.9); /* åœ°åœ–æµ®æ°´å°åº•è‰²ï¼Œå¯èª¿æ•´ */
  border-radius: 6px; /* åœ“è§’å¯èª¿æ•´ */
  padding: 2px 8px; /* å…§è·å¯èª¿æ•´ */
  font-size: 13px; /* å­—é«”å¤§å°å¯èª¿æ•´ */
  z-index: 9999;
}

#notif {
  position: fixed;
  top: 8%; /* æç¤ºæ¡†è·ä¸Šæ–¹ä½ç½®ï¼Œå¯èª¿æ•´ */
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.95); /* æç¤ºåº•è‰²ï¼Œå¯èª¿æ•´ */
  border-radius: 12px; /* æç¤ºåœ“è§’ï¼Œå¯èª¿æ•´ */
  padding: 12px 25px; /* æç¤ºå…§è·ï¼Œå¯èª¿æ•´ */
  box-shadow: 0 4px 14px rgba(0,0,0,0.2); /* æç¤ºé™°å½±å¯èª¿æ•´ */
  font-size: 20px; /* æç¤ºæ–‡å­—å¤§å°ï¼Œå¯èª¿æ•´ */
  color: #111; /* æ–‡å­—é¡è‰²å¯èª¿æ•´ */
  opacity: 0;
  transition: all 0.4s ease; /* é¡¯ç¤ºé€Ÿåº¦å¯èª¿æ•´ */
  pointer-events: none;
  white-space: nowrap;
}
#notif.show {
  opacity: 1;
  transform: translate(-50%, -10px);
}
#notif:not(.show) {
  transform: translate(-50%, 30px);
  opacity: 0;
}

/* æ‰‹æ©Ÿç‰ˆèª¿æ•´å€ */
@media (max-width: 768px) {
  #bottom-area {
    flex-direction: row;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    touch-action: pan-x;
  }
  #leaderboard, #map {
    flex: none;
    width: 100vw; /* æ‰‹æ©Ÿå¯¬åº¦ä½”æ»¿ï¼Œå¯èª¿æ•´ */
    height: 100%;
    scroll-snap-align: start;
  }
}
</style>
</head>
<body>
<div id="app">
  <div id="main-area">
    <div class="main-card" id="mission-card">
      <h1>ğŸ•™é—–é—œä»»å‹™ğŸ•’</h1>
      <p>æ­¡è¿åƒåŠ å¹¹æ‰é›™é¢é™³é—–é—œæ´»å‹•ï½<br>è«‹é»æ“Šé–‹å§‹é€²è¡ŒæŒ‘æˆ°ï¼</p>
      <button onclick="nextMission()">é–‹å§‹ä»»å‹™ â–¶</button>
    </div>
  </div>

  <div id="bottom-area">
    <div id="leaderboard">
      <h2>ğŸ† æ’è¡Œæ¦œ</h2>
      <span class="hint-box">ğŸ‘‰ å¾€å·¦æ»‘ç‚ºåœ°åœ–</span>
      <table>
        <thead><tr><th>åæ¬¡</th><th>æš±ç¨±</th><th>åˆ†æ•¸</th></tr></thead>
        <tbody id="rank-body"></tbody>
      </table>
    </div>
    <div id="map">
      <div class="map-hint-box">ğŸ‘ˆ å¾€å³æ»‘ç‚ºæ’è¡Œæ¦œ</div>
    </div>
  </div>
</div>

<div id="notif"></div>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- JS ä¿ç•™åŸæ¨£åŠŸèƒ½ï¼ŒCSS å¯ä¾è¨»è§£å¾®èª¿ -->
<script>
/* JS éƒ¨åˆ†ä¿æŒåŸæ¨£ï¼Œå¦‚éœ€æˆ‘å¹«è¨»è§£JSå…§å¯èª¿æ•¸å­—ä¹Ÿå¯ç¹¼çºŒåš */
</script>
</body>
</html>
